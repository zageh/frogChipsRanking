{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/frogChipsRanking/src/utils/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/frogChipsRanking/src/app/components/VoteControl.js"],"sourcesContent":["'use client' // 这句告诉Next.js这是一个会动的组件\r\nimport { useState } from 'react';\r\nimport { supabase } from '../../utils/supabase'; // 这里的路径可能需要根据你实际位置微调，如果是 ../utils/supabase \r\n\r\nexport default function VoteControl({ chipId, initialUserScore, voteCount }) {\r\n  const [votes, setVotes] = useState(initialUserScore || 0); // 这里我们简单用votes代替评分逻辑，你可以改成1-5星\r\n  const [count, setCount] = useState(voteCount || 0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // 模拟打分：实际上我们应该往 ratings 表里插数据\r\n  // 这里简化演示：点击只是加个赞\r\n  const handleVote = async (score) => {\r\n    if (loading) return;\r\n    setLoading(true);\r\n    \r\n    // 这里简单地发给 Supabase 说：我想给这包薯片投票\r\n    // 注意：真实逻辑需要你需要写对应的API或者前端插入逻辑\r\n    alert(`你给薯片(ID:${chipId}) 打了 ${score} 分！（假装入库成功）`);\r\n\r\n    setVotes(score); // 更新UI\r\n    setCount(count + 1);\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-16 bg-gray-50 p-2 flex flex-col items-center justify-center border-r border-gray-100 shrink-0 gap-1\">\r\n      {/* 向上箭头 */}\r\n      <button \r\n        onClick={() => handleVote(votes + 1)}\r\n        className=\"text-gray-400 hover:text-orange-500 hover:bg-gray-200 p-1 rounded transition-colors\"\r\n      >\r\n        ▲\r\n      </button>\r\n      \r\n      <span className=\"font-bold text-lg text-gray-800\">{count}</span>\r\n      \r\n      {/* 向下箭头 */}\r\n      <button \r\n        className=\"text-gray-400 hover:text-blue-500 hover:bg-gray-200 p-1 rounded transition-colors\"\r\n      >\r\n        ▼\r\n      </button>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA,kNAAiD,4CAA4C;AAF7F,cAAa,uBAAuB;;;;AAIrB,SAAS,YAAY,EAAE,MAAM,EAAE,gBAAgB,EAAE,SAAS,EAAE;IACzE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,oBAAoB,IAAI,+BAA+B;IAC1F,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,aAAa;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,8BAA8B;IAC9B,iBAAiB;IACjB,MAAM,aAAa,OAAO;QACxB,IAAI,SAAS;QACb,WAAW;QAEX,+BAA+B;QAC/B,8BAA8B;QAC9B,MAAM,CAAC,QAAQ,EAAE,OAAO,KAAK,EAAE,MAAM,WAAW,CAAC;QAEjD,SAAS,QAAQ,OAAO;QACxB,SAAS,QAAQ;QACjB,WAAW;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,SAAS,IAAM,WAAW,QAAQ;gBAClC,WAAU;0BACX;;;;;;0BAID,8OAAC;gBAAK,WAAU;0BAAmC;;;;;;0BAGnD,8OAAC;gBACC,WAAU;0BACX;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/frogChipsRanking/src/app/components/MainView.js"],"sourcesContent":["'use client' // 这句让它变成能互动的组件\r\nimport { useState } from 'react';\r\nimport { Search, Zap, Star, User, Cookie } from 'lucide-react';\r\nimport VoteControl from './VoteControl';\r\n\r\nexport default function MainView({ initialChips }) {\r\n  const [searchTerm, setSearchTerm] = useState(''); // 搜索词\r\n  const [activeTab, setActiveTab] = useState('admin'); // 'admin'(青蛙榜) 或 'public'(大众榜)\r\n\r\n  // 1. 先进行过滤（搜索功能）\r\n  const filteredChips = initialChips.filter(chip => \r\n    chip.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    (chip.description && chip.description.includes(searchTerm)) || \r\n    (chip.brand && chip.brand.includes(searchTerm))\r\n  );\r\n\r\n  // 2. 再进行排序（榜单切换逻辑）\r\n  const sortedChips = [...filteredChips].sort((a, b) => {\r\n    if (activeTab === 'admin') {\r\n      // 青蛙榜：只按你的打分降序\r\n      return b.admin_rating - a.admin_rating; \r\n    } else {\r\n      // 大众榜：这里暂时按随机生成的voteCount排序（等你有了真实用户数据再换成真实平均分）\r\n      // 我们在 page.js 里可以暂时给数据加上假的 vote_count，或者先按 ID 排\r\n      return (b.user_votes || 0) - (a.user_votes || 0);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"min-h-screen text-gray-800 font-sans pb-10 bg-[#DAE0E6]\">\r\n      {/* --- 顶部导航栏 (搜索功能在这里生效) --- */}\r\n      <nav className=\"sticky top-0 z-50 bg-white h-12 border-b border-gray-200 px-4 flex items-center justify-between shadow-sm\">\r\n        <div className=\"flex items-center gap-2 cursor-pointer\" onClick={()=>setActiveTab('admin')}>\r\n          <div className=\"bg-orange-500 rounded-full p-1\">\r\n            <Zap className=\"text-white w-5 h-5\" />\r\n          </div>\r\n          <span className=\"font-bold text-lg hidden sm:block\">Zageh's Chips</span>\r\n        </div>\r\n        \r\n        {/* 搜索框 */}\r\n        <div className=\"flex-1 max-w-xl mx-4\">\r\n          <div className=\"relative group\">\r\n            <Search className=\"absolute left-3 top-2 w-5 h-5 text-gray-400\" />\r\n            <input \r\n              type=\"text\" \r\n              placeholder=\"🔍 搜名字、品牌、口味...\" \r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)} // 这里让搜索生效！\r\n              className=\"w-full bg-gray-100 hover:bg-white border border-transparent hover:border-blue-500 rounded-full py-1.5 pl-10 pr-4 transition-all\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <button onClick={()=> alert(\"登录系统正在施工中...请找Zageh催更！\")} className=\"px-4 py-1 font-bold text-white bg-blue-500 rounded-full hover:bg-blue-600 text-sm\">\r\n            登录 / 注册\r\n        </button>\r\n      </nav>\r\n\r\n      {/* --- 榜单切换按钮 --- */}\r\n      <div className=\"max-w-[1024px] mx-auto pt-6 px-4\">\r\n         <div className=\"flex gap-4 mb-4 border-b border-gray-300 pb-2\">\r\n            <button \r\n                onClick={() => setActiveTab('admin')}\r\n                className={`text-lg font-bold pb-2 border-b-2 transition-all flex items-center gap-2 ${activeTab==='admin' ? 'border-orange-500 text-orange-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}\r\n            >\r\n                🐸 青蛙推荐榜 <span className=\"text-xs bg-orange-100 px-2 py-0.5 rounded-full text-orange-800\">Admin</span>\r\n            </button>\r\n            <button \r\n                onClick={() => setActiveTab('public')}\r\n                className={`text-lg font-bold pb-2 border-b-2 transition-all flex items-center gap-2 ${activeTab==='public' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}\r\n            >\r\n                👥 大众口碑榜 <span className=\"text-xs bg-blue-100 px-2 py-0.5 rounded-full text-blue-800\">Top Rated</span>\r\n            </button>\r\n         </div>\r\n\r\n         {/* --- 列表循环 --- */}\r\n        <div className=\"space-y-3 max-w-[800px] mx-auto\">\r\n          {sortedChips.map((chip, index) => (\r\n            <div key={chip.id} className=\"bg-white rounded border border-gray-300 flex hover:border-gray-400 transition-all shadow-sm overflow-hidden group\">\r\n              \r\n              {/* === 左侧：打分系统 (解决了问题3) === */}\r\n              {/* 现在把原来的VoteControl简单集成在这里，之后登录功能做好再抽离 */}\r\n              <div className=\"w-16 bg-gray-50 p-2 flex flex-col items-center justify-center border-r border-gray-100 shrink-0\">\r\n                  <div className=\"text-xs font-bold text-gray-400 mb-1\">大众分</div>\r\n                  \r\n                  {/* 这里是五星/五包薯片打分入口 */}\r\n                  <div className=\"mt-2 group/rating relative flex flex-col items-center\">\r\n                    <button className=\"text-gray-400 hover:text-yellow-500 transition-colors\">\r\n                        <Star size={20} fill=\"currentColor\" className=\"text-gray-300 group-hover/rating:text-yellow-400\"/>\r\n                    </button>\r\n                    <span className=\"text-[10px] text-gray-400\">点我也没用</span>\r\n                  </div>\r\n              </div>\r\n\r\n              {/* 内容区 */}\r\n              <div className=\"p-4 flex gap-5 w-full bg-white relative\">\r\n                \r\n                {/* 排名序号 */}\r\n                <div className=\"absolute top-2 right-4 text-4xl font-black text-gray-100 -z-0\">\r\n                    #{index + 1}\r\n                </div>\r\n\r\n                {/* 图片 */}\r\n                <div className=\"relative z-10 shrink-0\">\r\n                    {chip.image_url ? (\r\n                    <img src={chip.image_url} alt={chip.name} className=\"w-24 h-32 object-cover rounded shadow-sm border border-gray-200\" />\r\n                    ) : (\r\n                    <div className=\"w-24 h-32 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400\">无图</div>\r\n                    )}\r\n                </div>\r\n                \r\n                <div className=\"flex-1 min-w-0 z-10\">\r\n                  {/* 品牌 & 你的打分 (解决问题4) */}\r\n                  <div className=\"flex justify-between items-start\">\r\n                      <div className=\"text-xs text-gray-500 mb-1 flex items-center gap-2\">\r\n                        <span className=\"font-bold text-gray-600 flex items-center gap-1\"><Cookie size={12}/> {chip.brand || \"未知品牌\"}</span>\r\n                      </div>\r\n                      \r\n                      {/* === 你的显眼打分 === */}\r\n                      <div className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-bold border border-green-200 shadow-sm\" title=\"Zageh的评分\">\r\n                        🐸 {chip.admin_rating}\r\n                      </div>\r\n                  </div>\r\n\r\n                  <h3 className=\"text-xl font-bold text-gray-900 leading-tight mb-3 truncate pr-8\">{chip.name}</h3>\r\n                  \r\n                  {/* 你的评价 */}\r\n                  <div className=\"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 italic relative mb-3\">\r\n                    <span className=\"text-gray-300 absolute top-[-5px] left-1 text-2xl font-serif\">“</span>\r\n                    {chip.description}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* 底部交互条 (解决问题6的基础) */}\r\n              <div className=\"flex flex-col border-l border-gray-100 w-12 items-center py-4 gap-4 bg-gray-50 text-gray-400 text-xs\">\r\n                 <button title=\"评论 (施工中)\" className=\"hover:text-blue-500\"><i className=\"lucide-message-square\"></i>💬</button>\r\n                 <button title=\"收藏\" className=\"hover:text-yellow-500\">⭐</button>\r\n                 <button title=\"分享\" className=\"hover:text-green-500\">🔗</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          \r\n          {(!sortedChips || sortedChips.length === 0) && (\r\n             <div className=\"text-center p-10 bg-white rounded border border-gray-200\">\r\n                <p className=\"text-gray-500\">没找到名叫 “{searchTerm}” 的薯片...</p>\r\n                <p className=\"text-sm text-gray-400 mt-2\">（试试去许愿池让Zageh买一包？）</p>\r\n             </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}